{% extends 'base.html' %}
{% block content %}

<h1>{{resource.title}} Details</h1>

<div class="card">
  <div class="card-content">
    <span class="card-title">{{ resource.title }}</span>
    <p>Category: {{ resource.get_category_display }}</p>
    <p>Url: <a target="_blank" href="https://{{ resource.resource_url }}">{{ resource.resource_url }}</a></p>
    <p>Description: {{ resource.content }}</p>
    <p>Posted By: @{{ resource.user }}</p>
  </div>
  <div class="card-action">
  </div>
  <div class="card-action">
    <a href="{% url 'resources_update' resource.id %}">Edit</a>
    <a href="{% url 'resources_delete' resource.id %}">Delete</a>
    {% if resource.id in favorite %}
        <form action="{% url 'favorites_delete' favorite_id.id %}" method="POST">
            {% csrf_token %}
            <input type="submit" class="btn" value="Remove">
        </form>
    {% else %}
        <form action="{% url 'assoc_resource' resource.id %}" method="POST">
            {% csrf_token %}
            <input type="submit" class="btn" value="Add To Favorites">
        </form>
    {% endif %}
  </div>
</div>

<div class="card">
  <div class="col s6">
    <form action="{% url 'add_comment' resource.id %}" method="POST">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <input type="submit" class="btn" value="Comment">
    </form>
    <br>
        {% for comment in resource.comment_set.all %}
            <p>@{{comment.user}}</p>
            <p>{{comment.content}}</p>
            <p>{{comment.comment_date}}</p>
        {% endfor %}
</div>

{% endblock %}